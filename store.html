<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Gauri Creations ‚Ä¢ Store</title>

<meta name="description" content="Gauri Creations - Exclusive handcrafted Haldi Ceremony Platters, Floral Rangolis, and Wedding Accessories. Shop online for premium handcrafted decor.">
<meta name="keywords" content="Gauri Creations, Haldi Platter, Floral Rangoli, Wedding Tray, Handcrafted Gifts, Trousseau Packing, Online Store">
<meta name="author" content="Gauri Creations">

<link rel="icon" href="favicon.ico" type="image/x-icon">
<link rel="apple-touch-icon" href="favicon.ico">

<style>
  :root{
    --bg-grad: linear-gradient(135deg,#e3f2ff,#ffe5f3);
    --glass: rgba(255,255,255,0.85);
    --glass-strong: rgba(255,255,255,0.95);
    --glass-border: rgba(148,163,184,0.6);
    --shadow-strong: 0 10px 30px rgba(15,23,42,0.15);
    --accent-grad: linear-gradient(135deg,#2563eb,#ec4899);
    --muted:#6b7280;
    
    /* ‚úÖ FIXED: Apple Style Blue */
    --primary: #0071e3; 
  }
  *{box-sizing:border-box}
  body{
    margin:0;min-height:100vh;font-family:'Poppins',sans-serif;
    background:var(--bg-grad);padding:15px;
    display:flex;justify-content:center;
  }

  .shell{width:100%;max-width:1150px}

  /* HEADER SECTION */
  .header-row {
    display: flex; align-items: center; justify-content: space-between;
    background: var(--glass-strong);
    padding: 12px 16px;
    border-radius: 18px;
    border: 1px solid var(--glass-border);
    box-shadow: var(--shadow-strong);
    margin-bottom: 16px;
    position: relative;
    z-index: 100;
  }

  .brand { display: flex; align-items: center; gap: 12px; }
  .brand-logo { width: 45px; height: 45px; border-radius: 8px; object-fit: cover; }
  .brand-info { display: flex; flex-direction: column; }
  
  .brand-name { 
    font-size: 18px; 
    font-weight: 800; 
    color: #000;
    line-height: 1.2; 
  }
  
  .brand-welcome { 
    font-size: 13px; 
    color: #000;
    font-weight: 600; 
  }

  /* MENU BUTTON */
  .menu-btn {
    background: var(--accent-grad); color: #fff;
    padding: 8px 14px; border-radius: 99px;
    font-size: 13px; font-weight: 600; cursor: pointer;
    border: none; box-shadow: 0 4px 10px rgba(0,0,0,0.15);
  }

  .menu-list{
    display:none;position:absolute;top:65px;right:0;
    background:white;border-radius:12px;min-width:180px;
    box-shadow:0 10px 30px rgba(0,0,0,0.2);overflow:hidden;
    z-index: 101; border: 1px solid #eee;
  }
  .menu-list a{
    display:block;padding:12px 16px;text-decoration:none;
    color:#333;font-size:14px;border-bottom:1px solid #f0f0f0;
  }
  .menu-list a:last-child{border-bottom:none}
  .menu-list a:hover{background:#f8fafc; color: var(--primary);}

  /* HERO SECTION */
  .hero{display:grid;grid-template-columns:3fr 1.5fr;gap:12px;margin-bottom:14px}
  @media(max-width:768px){.hero{grid-template-columns:1fr}}

  .hero-slider {
    position: relative; border-radius: 18px; overflow: hidden;
    height: 200px; background: #fff;
    border: 1px solid var(--glass-border);
    box-shadow: var(--shadow-strong);
    cursor: pointer;
  }
  
  .slide {
    position: absolute; top: 0; left: 0; width: 100%; height: 100%;
    opacity: 0; transition: opacity 0.8s ease-in-out;
    display: flex; align-items: flex-end;
  }
  .slide.active { opacity: 1; z-index: 1; }
  
  .slide img {
    position: absolute; width: 100%; height: 100%; object-fit: cover; z-index: 0;
  }
  
  .slide-overlay {
    position: absolute; bottom: 0; left: 0; width: 100%;
    background: linear-gradient(to top, rgba(0,0,0,0.8), transparent);
    padding: 15px; color: white; z-index: 2;
  }
  .slide-title { font-size: 16px; font-weight: 700; text-shadow: 0 2px 4px rgba(0,0,0,0.5); }
  .slide-price { font-size: 14px; color: #ffd700; font-weight: 600; }

  /* SIDE STATS */
  .hero-side{
    border-radius:18px; padding:20px;
    background: #fff;
    border: 1px solid var(--glass-border);
    box-shadow: var(--shadow-strong);
    display: flex; flex-direction: column; justify-content: center; align-items: center;
    text-align: center; height: 200px;
  }
  @media(max-width:768px){ .hero-side { height: auto; padding: 15px; flex-direction: row; gap: 10px; } }

  /* ‚úÖ FIXED: Number and Text are strictly BLACK */
  .hero-side h3 { margin: 0; font-size: 32px; color: #000; line-height: 1; }
  .hero-side span { font-size: 13px; color: #000; }

  /* FILTERS & SEARCH */
  .filters{
    background:var(--glass-strong); border-radius:18px; padding:12px;
    border:1px solid var(--glass-border);
    box-shadow:var(--shadow-strong); margin-bottom:14px;
  }

  #searchInput {
    width: 100%; padding: 12px; border-radius: 12px;
    border: 1px solid #cbd5e1; background: #f8fafc;
    margin-bottom: 12px; font-size: 14px;
  }

  .category-bar {
    display: flex; gap: 8px; overflow-x: auto; padding-bottom: 4px;
    scrollbar-width: none;
  }
  .category-bar::-webkit-scrollbar { display: none; }

  .cat-chip {
    background: white; border: 1px solid #e2e8f0;
    padding: 8px 16px; border-radius: 999px;
    font-size: 13px; font-weight: 500; color: #475569;
    cursor: pointer; transition: all 0.2s; white-space: nowrap;
  }
  .cat-chip.active {
    background: var(--primary); /* Uses Apple Blue */
    color: white; 
    border-color: var(--primary);
  }

  /* PRODUCT GRID */
  .grid{
    display:grid; grid-template-columns:repeat(auto-fill,minmax(160px,1fr)); gap:14px;
  }

  .product-card{
    border-radius:16px; background:var(--glass-strong);
    border:1px solid rgba(209,213,219,0.7);
    box-shadow: 0 4px 12px rgba(0,0,0,0.05);
    padding:10px; display:flex; flex-direction:column;
    gap:8px; position:relative; transition: transform 0.2s;
  }
  
  .product-img-wrap{
    border-radius:12px; overflow:hidden; background:#f1f5f9;
    height:150px; display:flex; align-items:center; justify-content:center;
    position:relative;
  }

  .product-img{ width:100%; height:100%; object-fit:cover; }

  .wish-btn{
    position:absolute; top:8px; right:8px;
    background:rgba(255,255,255,0.9); border-radius:50%;
    width: 28px; height: 28px; display: flex; align-items: center; justify-content: center;
    cursor:pointer; font-size:14px; box-shadow:0 2px 5px rgba(0,0,0,0.1);
  }

  .product-actions{ margin-top: auto; }
  .btn-primary{
    width: 100%; background:var(--accent-grad); color:#fff;
    border-radius:10px; padding:10px; border:none;
    font-size:13px; font-weight:600; cursor:pointer;
  }
</style>
</head>

<body>

<div class="shell">
  
  <div class="header-row">
    <div class="brand">
      <img src="logo-gauri.jpeg" class="brand-logo" onerror="this.style.display='none'">
      <div class="brand-info">
        <div class="brand-name">Gauri Creations</div>
        <div class="brand-welcome" id="welcomeText">Welcome</div>
      </div>
    </div>
    
    <button class="menu-btn" onclick="toggleMenu()">‚ò∞ Menu</button>
    
    <div id="menuList" class="menu-list">
      <a href="my-orders.html">üì¶ My Orders</a>
      <a href="track.html">üöö Track Parcel</a>
      <a href="wishlist.html">‚ù§Ô∏è Wishlist</a>
      <a href="mailto:gauricreations04@gmail.com">üì© Email Support</a>
      <a href="https://wa.me/917745092723">üí¨ WhatsApp</a>
      <a href="#" onclick="logoutUser()" style="color:red">üö™ Logout</a>
    </div>
  </div>

  <section class="hero">
    <div class="hero-slider" id="heroSlider">
       <div style="display:flex;align-items:center;justify-content:center;height:100%;color:#888;font-size:13px;">
         Loading Offers...
       </div>
    </div>

    <aside class="hero-side">
      <h3 id="summaryTotal">0</h3>
      <span>Products<br>Available</span>
    </aside>
  </section>

  <section class="filters">
    <input id="searchInput" placeholder="Search products (e.g. Haldi)..." onkeyup="filterProducts()">
    <div id="categoryBar" class="category-bar"></div>
  </section>

  <section id="grid" class="grid"></section>

</div>

<script>
const user = JSON.parse(localStorage.getItem("gc_customer") || "null");
if(user) document.getElementById("welcomeText").textContent = "Hi, " + user.name.split(" ")[0];

function toggleMenu(){
  const m=document.getElementById("menuList");
  m.style.display = m.style.display==="block"?"none":"block";
}
function logoutUser(){
  localStorage.removeItem("gc_customer");
  window.location.href="login.html";
}

/* ‚ù§Ô∏è Wishlist helpers */
function getWishlist(){ return JSON.parse(localStorage.getItem("gc_wishlist")||"[]"); }
function saveWishlist(list){ localStorage.setItem("gc_wishlist",JSON.stringify(list)); }
function toggleWishlist(sku,el){
  const list=getWishlist(); const i=list.indexOf(sku);
  if(i>=0){ list.splice(i,1); el.textContent="ü§ç"; }
  else{ list.push(sku); el.textContent="‚ù§Ô∏è"; }
  saveWishlist(list);
}

/* ‚úÖ IMAGE FIXER */
function getImg(p){
  let url = p["Image URL 1"] || p["Image URL 1 "] || p.imageUrl1 || p.Image || "";
  // Smart Find
  if (!url) {
    Object.keys(p).forEach(k => {
      if(k.toLowerCase().includes("image") && p[k]) url = p[k];
    });
  }
  // Drive Fix
  if (url && url.includes("drive.google.com") && url.includes("id=")) {
    const idMatch = url.match(/id=([^&]+)/);
    if (idMatch && idMatch[1]) {
      return "https://lh3.googleusercontent.com/d/" + idMatch[1];
    }
  }
  return url || "https://via.placeholder.com/400x300?text=No+Image";
}

// üî¥ SCRIPT URL
const SCRIPT_URL = "https://script.google.com/macros/s/AKfycbyGE0vN4yxngAyqooJAnULrBQbbNc6kyluYSg7JgydWeJ5481HmsFxVgC8kCWBvE3Wq/exec";

// Global Data
let allProducts = [];
let activeCategory = 'All';

async function loadProducts(){
  const grid = document.getElementById("grid");
  
  try {
    const res = await fetch(SCRIPT_URL+"?action=getProducts");
    const data = await res.json();
    allProducts = data.products || [];

    setupCategories(allProducts);
    initSlideshow(allProducts.slice(0, 5));
    renderGrid(allProducts);

    document.getElementById("summaryTotal").textContent = allProducts.length;

  } catch (err) {
    console.error(err);
    grid.innerHTML = "<p style='grid-column:1/-1;text-align:center'>Failed to load products.</p>";
  }
}

/* üî• HERO SLIDESHOW LOGIC */
function initSlideshow(products) {
  const container = document.getElementById("heroSlider");
  if(products.length === 0) return;
  
  container.innerHTML = ""; 

  products.forEach((p, index) => {
    const slide = document.createElement("div");
    slide.className = `slide ${index === 0 ? 'active' : ''}`;
    slide.onclick = () => goToProduct(p.SKU);
    
    slide.innerHTML = `
      <img src="${getImg(p)}">
      <div class="slide-overlay">
        <div class="slide-title">${p.Name}</div>
        <div class="slide-price">‚Çπ${p.Price}</div>
      </div>
    `;
    container.appendChild(slide);
  });

  let currentSlide = 0;
  setInterval(() => {
    const slides = document.querySelectorAll('.slide');
    if(slides.length < 2) return;
    slides[currentSlide].classList.remove('active');
    currentSlide = (currentSlide + 1) % slides.length;
    slides[currentSlide].classList.add('active');
  }, 3500);
}

function setupCategories(products) {
    const bar = document.getElementById("categoryBar");
    const categories = ['All', ...new Set(products.map(p => p.Category || p.category || 'Other'))];
    bar.innerHTML = "";

    categories.forEach(cat => {
        const btn = document.createElement("div");
        btn.className = `cat-chip ${cat === 'All' ? 'active' : ''}`;
        btn.textContent = cat;
        btn.onclick = () => {
            document.querySelectorAll('.cat-chip').forEach(b => b.classList.remove('active'));
            btn.classList.add('active');
            activeCategory = cat;
            filterProducts();
        };
        bar.appendChild(btn);
    });
}

function filterProducts() {
    const search = document.getElementById("searchInput").value.toLowerCase();
    const filtered = allProducts.filter(p => {
        const pName = (p.Name || "").toLowerCase();
        const pCat = (p.Category || p.category || "Other");
        const catMatch = activeCategory === 'All' || pCat === activeCategory;
        const searchMatch = pName.includes(search);
        return catMatch && searchMatch;
    });
    renderGrid(filtered);
}

function renderGrid(products) {
    const grid = document.getElementById("grid");
    const wishlist = getWishlist();
    grid.innerHTML = "";
    
    if(products.length === 0){
       grid.innerHTML = "<p style='grid-column:1/-1;text-align:center;color:#666'>No products found.</p>";
       return;
    }

    products.forEach(p => {
      const liked = wishlist.includes(p.SKU) ? "‚ù§Ô∏è" : "ü§ç";
      const imageUrl = getImg(p);

      const card = document.createElement("div");
      card.className = "product-card";
      card.innerHTML = `
        <div class="product-img-wrap">
          <img src="${imageUrl}" class="product-img" loading="lazy">
          <div class="wish-btn" onclick="toggleWishlist('${p.SKU}',this)">${liked}</div>
        </div>
        <strong style="font-size:14px; margin-top:5px; line-height:1.2">${p.Name || "Unnamed"}</strong>
        
        <div style="font-weight:700; color:#000000">‚Çπ${p.Price || "0"}</div>
        
        <div class="product-actions">
          <button class="btn-primary" onclick="goToProduct('${p.SKU}')">Know More</button>
        </div>`;
      grid.appendChild(card);
    });
}

function goToProduct(sku){
  if(!sku) return;
  window.location.href = "product.html?sku="+encodeURIComponent(sku);
}

loadProducts();
</script>

</body>
</html>
